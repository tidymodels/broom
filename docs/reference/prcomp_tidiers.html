<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tidying methods for principal components analysis via <code>prcomp()</code> — prcomp_tidiers • broom</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">broom</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/broom.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/adding-tidiers.html">Adding new tidiers</a>
    </li>
    <li>
      <a href="../articles/available-methods.html">Available methods</a>
    </li>
    <li>
      <a href="../articles/bootstrapping.html">Bootstrapping</a>
    </li>
    <li>
      <a href="../articles/broom_and_dplyr.html">Broom and dplyr</a>
    </li>
    <li>
      <a href="../articles/kmeans.html">K-means</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/broom">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tidying methods for principal components analysis via <code>prcomp()</code></h1>
    <small class="dont-index">Source: <a href='http://github.com/tidyverse/broom/blob/master/R/stats-prcomp-tidiers.R'><code>R/stats-prcomp-tidiers.R</code></a></small>
    <div class="hidden name"><code>prcomp_tidiers.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These tidiers operate on the results of a principal components analysis
computed using <code>prcomp</code>. The <code>tidy</code> method returns a data frame
with either the eigenvectors representing each row or each column.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for prcomp</span>
<span class='fu'><a href='tidy.html'>tidy</a></span>(<span class='no'>x</span>, <span class='kw'>matrix</span> <span class='kw'>=</span> <span class='st'>"u"</span>, <span class='no'>...</span>)

<span class='co'># S3 method for prcomp</span>
<span class='fu'><a href='augment.html'>augment</a></span>(<span class='no'>x</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>newdata</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>"prcomp"</code> resulting from a call to
<code><a href='http://www.rdocumentation.org/packages/stats/topics/prcomp'>stats::prcomp()</a></code></p></td>
    </tr>
    <tr>
      <th>matrix</th>
      <td><p>character; Indicates which sets of eigenvectors are returned
in tidy form. "v", "rotation", or "variables" will return information about
each variable, while "u", "x", or "samples" (default) returns the loadings
for each original row. "d" or "pcs" returns information about each
principal component.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments, not used</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>the original data on which principal components analysis
was performed. This cannot be recovered from <code>x</code>. If <code>newdata</code>
is supplied, <code>data</code> is ignored. If both <code>data</code> and <code>newdata</code>
are missing, only the fitted locations on the principal components are
returned.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>data frame; new observations for which locations on principal
components are sought.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>All tidying methods return a data.frame without rownames, whose
structure depends on the method chosen.</p>
<p>If <code>matrix</code> is "u", "samples", or "x", the <code>tidy</code> method
returns</p><dl class='dl-horizontal'>
<dt><code>row</code></dt><dd><p>The sample labels (rownames) of the data set on
which PCA was performed</p></dd>
<dt><code>PC</code></dt><dd><p>An integer vector indicating the principal component</p></dd>
<dt><code>value</code></dt><dd><p>The value of the eigenvector (axis score) on the
indicated principal component</p></dd>
</dl>

<p>If <code>matrix</code> is "v", "variables", or "rotation", the <code>tidy</code> method
returns</p><dl class='dl-horizontal'>
<dt><code>row</code></dt><dd><p>The variable labels (colnames) of the data set on
which PCA was performed</p></dd>
<dt><code>PC</code></dt><dd><p>An integer vector indicating the principal component</p></dd>
<dt><code>value</code></dt><dd><p>The value of the eigenvector (axis score) on the
indicated principal component</p></dd>
</dl>

<p>If <code>matrix</code> is "d" or "pcs", the <code>tidy</code> method returns</p><dl class='dl-horizontal'>
<dt><code>PC</code></dt><dd><p>An integer vector indicating the principal component</p></dd>
<dt><code>std.dev</code></dt><dd><p>Standard deviation explained by this PC</p></dd>
<dt><code>percent</code></dt><dd><p>Percentage of variation explained</p></dd>
<dt><code>cumulative</code></dt><dd><p>Cumulative percentage of variation explained</p></dd>
</dl>

<p>The <code>augment.prcomp</code> method returns a data frame containing
fitted locations on the principal components for the observed data plus
either the original data or the new data if supplied via <code>data</code> or
<code>newdata</code> respectively.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>prcomp()</code>, svd_tidiers</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>pc</span> <span class='kw'>&lt;-</span> <span class='fu'>prcomp</span>(<span class='no'>USArrests</span>, <span class='kw'>scale</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># information about rotation</span>
<span class='fu'>head</span>(<span class='fu'><a href='tidy.html'>tidy</a></span>(<span class='no'>pc</span>))</div><div class='output co'>#&gt; # A tibble: 6 x 3
#&gt;   row           PC  value
#&gt;   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 Alabama        1 -0.976
#&gt; 2 Alaska         1 -1.93 
#&gt; 3 Arizona        1 -1.75 
#&gt; 4 Arkansas       1  0.140
#&gt; 5 California     1 -2.50 
#&gt; 6 Colorado       1 -1.50 </div><div class='input'>
<span class='co'># information about samples (states)</span>
<span class='fu'>head</span>(<span class='fu'><a href='tidy.html'>tidy</a></span>(<span class='no'>pc</span>, <span class='st'>"samples"</span>))</div><div class='output co'>#&gt; # A tibble: 6 x 3
#&gt;   row           PC  value
#&gt;   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;
#&gt; 1 Alabama        1 -0.976
#&gt; 2 Alaska         1 -1.93 
#&gt; 3 Arizona        1 -1.75 
#&gt; 4 Arkansas       1  0.140
#&gt; 5 California     1 -2.50 
#&gt; 6 Colorado       1 -1.50 </div><div class='input'>
<span class='co'># information about PCs</span>
<span class='fu'><a href='tidy.html'>tidy</a></span>(<span class='no'>pc</span>, <span class='st'>"pcs"</span>)</div><div class='output co'>#&gt; # A tibble: 4 x 4
#&gt;      PC std.dev percent cumulative
#&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
#&gt; 1     1   1.57   0.620       0.620
#&gt; 2     2   0.995  0.247       0.868
#&gt; 3     3   0.597  0.0891      0.957
#&gt; 4     4   0.416  0.0434      1    </div><div class='input'>
<span class='co'># state map</span>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='no'>pc</span> <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='tidy.html'>tidy</a></span>(<span class='kw'>matrix</span> <span class='kw'>=</span> <span class='st'>"samples"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>region</span> <span class='kw'>=</span> <span class='fu'>tolower</span>(<span class='no'>row</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://dplyr.tidyverse.org/reference/join.html'>inner_join</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/map_data'>map_data</a></span>(<span class='st'>"state"</span>), <span class='kw'>by</span> <span class='kw'>=</span> <span class='st'>"region"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>long</span>, <span class='no'>lat</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>group</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='no'>value</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_polygon'>geom_polygon</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap'>facet_wrap</a></span>(~ <span class='no'>PC</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_void</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/labs'>ggtitle</a></span>(<span class='st'>"Principal components of arrest data"</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'maps'</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from 'package:mclust':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    map</span></div><div class='img'><img src='prcomp_tidiers-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>au</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='augment.html'>augment</a></span>(<span class='no'>pc</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>USArrests</span>)
<span class='fu'>head</span>(<span class='no'>au</span>)</div><div class='output co'>#&gt; # A tibble: 6 x 9
#&gt;   .rownames  Murder Assault UrbanPop  Rape .fittedPC1 .fittedPC2 .fittedPC3
#&gt;   &lt;fct&gt;       &lt;dbl&gt;   &lt;int&gt;    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
#&gt; 1 Alabama      13.2     236       58  21.2     -0.976      1.12     -0.440 
#&gt; 2 Alaska       10       263       48  44.5     -1.93       1.06      2.02  
#&gt; 3 Arizona       8.1     294       80  31       -1.75      -0.738     0.0542
#&gt; 4 Arkansas      8.8     190       50  19.5      0.140      1.11      0.113 
#&gt; 5 California    9       276       91  40.6     -2.50      -1.53      0.593 
#&gt; 6 Colorado      7.9     204       78  38.7     -1.50      -0.978     1.08  
#&gt; # ... with 1 more variable: .fittedPC4 &lt;dbl&gt;</div><div class='input'>
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>au</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='no'>.fittedPC1</span>, <span class='no'>.fittedPC2</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_text'>geom_text</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>label</span> <span class='kw'>=</span> <span class='no'>.rownames</span>), <span class='kw'>vjust</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>hjust</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='img'><img src='prcomp_tidiers-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Gavin L. Simpson

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>broom is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by David Robinson.</p>
  <p>Site built by <a href="http://pkgdown.r-lib.org">pkgdown</a>.</p>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
      </footer>
   </div>

  

  </body>
</html>

