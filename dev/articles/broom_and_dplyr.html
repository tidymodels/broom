<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>broom and dplyr • broom</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="broom and dplyr">
<meta name="robots" content="noindex">
<script defer data-domain="broom.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">broom</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.8.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/broom.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/adding-tidiers.html">Writing new tidier methods</a></li>
    <li><a class="dropdown-item" href="../articles/available-methods.html">Available methods</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrapping.html">Tidy bootstrapping</a></li>
    <li><a class="dropdown-item" href="../articles/broom_and_dplyr.html">broom and dplyr</a></li>
    <li><a class="dropdown-item" href="../articles/kmeans.html">kmeans with dplyr and broom</a></li>
    <li><a class="dropdown-item" href="../articles/maintenance.html">Maintenance guidelines</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/broom/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>broom and dplyr</h1>
            
            <h4 data-toc-skip class="date">2025-04-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/broom/blob/main/vignettes/broom_and_dplyr.Rmd" class="external-link"><code>vignettes/broom_and_dplyr.Rmd</code></a></small>
      <div class="d-none name"><code>broom_and_dplyr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="broom-and-dplyr">broom and dplyr<a class="anchor" aria-label="anchor" href="#broom-and-dplyr"></a>
</h2>
<p>While broom is useful for summarizing the result of a single analysis
in a consistent format, it is really designed for high-throughput
applications, where you must combine results from multiple analyses.
These could be subgroups of data, analyses using different models,
bootstrap replicates, permutations, and so on. In particular, it plays
well with the <code>nest/unnest</code> functions in <code>tidyr</code>
and the <code>map</code> function in <code>purrr</code>. First, loading
necessary packages and setting some defaults:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/">broom</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Let’s try this on a simple dataset, the built-in <code>Orange</code>.
We start by coercing <code>Orange</code> to a <code>tibble</code>. This
gives a nicer print method that will especially useful later on when we
start working with list-columns.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Orange</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">)</span></span>
<span><span class="va">Orange</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 35 × 3</span></span></span>
<span><span class="co">##    Tree    age circumference</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1       118            30</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1       484            58</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1       664            87</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 1      <span style="text-decoration: underline;">1</span>004           115</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 1      <span style="text-decoration: underline;">1</span>231           120</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 1      <span style="text-decoration: underline;">1</span>372           142</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 1      <span style="text-decoration: underline;">1</span>582           145</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 2       118            33</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 2       484            69</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 2       664           111</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 25 more rows</span></span></span></code></pre>
<p>This contains 35 observations of three variables: <code>Tree</code>,
<code>age</code>, and <code>circumference</code>. <code>Tree</code> is a
factor with five levels describing five trees. As might be expected, age
and circumference are correlated:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">$</span><span class="va">age</span>, <span class="va">Orange</span><span class="op">$</span><span class="va">circumference</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.9135189</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">Orange</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">circumference</span>, color <span class="op">=</span> <span class="va">Tree</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="broom_and_dplyr_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Suppose you want to test for correlations individually
<em>within</em> each tree. You can do this with dplyr’s
<code>group_by</code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Orange</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Tree</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>correlation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">circumference</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">##   Tree  correlation</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 3           0.988</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 1           0.985</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 5           0.988</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 2           0.987</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 4           0.984</span></span></code></pre>
<p>(Note that the correlations are much higher than the aggregated one,
and furthermore we can now see it is similar across trees).</p>
<p>Suppose that instead of simply estimating a correlation, we want to
perform a hypothesis test with <code>cor.test</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test</a></span><span class="op">(</span><span class="va">Orange</span><span class="op">$</span><span class="va">age</span>, <span class="va">Orange</span><span class="op">$</span><span class="va">circumference</span><span class="op">)</span></span>
<span><span class="va">ct</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Pearson's product-moment correlation</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  Orange$age and Orange$circumference</span></span>
<span><span class="co">## t = 12.9, df = 33, p-value = 1.931e-14</span></span>
<span><span class="co">## alternative hypothesis: true correlation is not equal to 0</span></span>
<span><span class="co">## 95 percent confidence interval:</span></span>
<span><span class="co">##  0.8342364 0.9557955</span></span>
<span><span class="co">## sample estimates:</span></span>
<span><span class="co">##       cor </span></span>
<span><span class="co">## 0.9135189</span></span></code></pre>
<p>This contains multiple values we could want in our output. Some are
vectors of length 1, such as the p-value and the estimate, and some are
longer, such as the confidence interval. We can get this into a nicely
organized tibble using the <code>tidy</code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">ct</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">##   estimate statistic  p.value parameter conf.low conf.high method      </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>    0.914      12.9 1.93<span style="color: #949494;">e</span><span style="color: #BB0000;">-14</span>        33    0.834     0.956 Pearson's p…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: alternative &lt;chr&gt;</span></span></span></code></pre>
<p>Often, we want to perform multiple tests or fit multiple models, each
on a different part of the data. In this case, we recommend a
<code>nest-map-unnest</code> workflow. For example, suppose we want to
perform correlation tests for each different tree. We start by
<code>nest</code>ing our data based on the group of interest:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nested</span> <span class="op">&lt;-</span> <span class="va">Orange</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">-</span><span class="va">Tree</span><span class="op">)</span></span></code></pre></div>
<p>Then we run a correlation test for each nested tibble using
<code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nested</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>test <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">age</span>, <span class="va">.x</span><span class="op">$</span><span class="va">circumference</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">##   Tree  data             test   </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 2     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 3     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 5     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span></span></span></code></pre>
<p>This results in a list-column of S3 objects. We want to tidy each of
the objects, which we can also do with <code>map</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nested</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    test <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">age</span>, <span class="va">.x</span><span class="op">$</span><span class="va">circumference</span><span class="op">)</span><span class="op">)</span>, <span class="co"># S3 list-col</span></span>
<span>    tidied <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">test</span>, <span class="va">tidy</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">##   Tree  data             test    tidied          </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 8]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 2     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 8]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 3     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 8]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 8]&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 5     <span style="color: #949494;">&lt;tibble [7 × 2]&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 8]&gt;</span></span></span></code></pre>
<p>Finally, we want to unnest the tidied data frames so we can see the
results in a flat tibble. All together, this looks like:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Orange</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">-</span><span class="va">Tree</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    test <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.test.html" class="external-link">cor.test</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">age</span>, <span class="va">.x</span><span class="op">$</span><span class="va">circumference</span><span class="op">)</span><span class="op">)</span>, <span class="co"># S3 list-col</span></span>
<span>    tidied <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">test</span>, <span class="va">tidy</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">tidied</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 11</span></span></span>
<span><span class="co">##   Tree  data     test    estimate statistic  p.value parameter conf.low</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> 1     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span>    0.985      13.0  4.85<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>         5    0.901</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> 2     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span>    0.987      13.9  3.43<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>         5    0.914</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> 3     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span>    0.988      14.4  2.90<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>         5    0.919</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> 4     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span>    0.984      12.5  5.73<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>         5    0.895</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> 5     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;htest&gt;</span>    0.988      14.1  3.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span>         5    0.916</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 3 more variables: conf.high &lt;dbl&gt;, method &lt;chr&gt;, alternative &lt;chr&gt;</span></span></span></code></pre>
<p>This workflow becomes even more useful when applied to regressions.
Untidy output for a regression looks like:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">age</span> <span class="op">~</span> <span class="va">circumference</span>, data <span class="op">=</span> <span class="va">Orange</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/urca/man/summary-methods.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">lm_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = age ~ circumference, data = Orange)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residuals:</span></span>
<span><span class="co">##     Min      1Q  Median      3Q     Max </span></span>
<span><span class="co">## -317.88 -140.90  -17.20   96.54  471.16 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">##               Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span><span class="co">## (Intercept)    16.6036    78.1406   0.212    0.833    </span></span>
<span><span class="co">## circumference   7.8160     0.6059  12.900 1.93e-14 ***</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Residual standard error: 203.1 on 33 degrees of freedom</span></span>
<span><span class="co">## Multiple R-squared:  0.8345, Adjusted R-squared:  0.8295 </span></span>
<span><span class="co">## F-statistic: 166.4 on 1 and 33 DF,  p-value: 1.931e-14</span></span></code></pre>
<p>where we tidy these results, we get multiple rows of output for each
model:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">lm_fit</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 5</span></span></span>
<span><span class="co">##   term          estimate std.error statistic  p.value</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> (Intercept)      16.6     78.1       0.212 8.33<span style="color: #949494;">e</span><span style="color: #BB0000;">- 1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> circumference     7.82     0.606    12.9   1.93<span style="color: #949494;">e</span><span style="color: #BB0000;">-14</span></span></span></code></pre>
<p>Now we can handle multiple regressions at once using exactly the same
workflow as before:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Orange</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">-</span><span class="va">Tree</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    fit <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">age</span> <span class="op">~</span> <span class="va">circumference</span>, data <span class="op">=</span> <span class="va">.x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    tidied <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">tidy</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">tidied</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 8</span></span></span>
<span><span class="co">##    Tree  data     fit    term      estimate std.error statistic p.value</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;ord&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Interce…  -<span style="color: #BB0000;">265.</span>      98.6      -<span style="color: #BB0000;">2.68</span>  4.36<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   circumfe…    11.9      0.919    13.0   4.85<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 2     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Interce…  -<span style="color: #BB0000;">132.</span>      83.1      -<span style="color: #BB0000;">1.59</span>  1.72<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 2     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   circumfe…     7.80     0.560    13.9   3.43<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 3     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Interce…  -<span style="color: #BB0000;">210.</span>      85.3      -<span style="color: #BB0000;">2.46</span>  5.74<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 3     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   circumfe…    12.0      0.835    14.4   2.90<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 4     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Interce…   -<span style="color: #BB0000;">76.5</span>     88.3      -<span style="color: #BB0000;">0.867</span> 4.26<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 4     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   circumfe…     7.17     0.572    12.5   5.73<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 5     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Interce…   -<span style="color: #BB0000;">54.5</span>     76.9      -<span style="color: #BB0000;">0.709</span> 5.10<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 5     <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   circumfe…     8.79     0.621    14.1   3.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-5</span></span></span></code></pre>
<p>You can just as easily use multiple predictors in the regressions, as
shown here on the <code>mtcars</code> dataset. We nest the data into
automatic and manual cars (the <code>am</code> column), then perform the
regression within each nested tibble.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="va">mtcars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="co"># to play nicely with list-cols</span></span>
<span><span class="va">mtcars</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 32 × 11</span></span></span>
<span><span class="co">##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>  21       6  160    110  3.9   2.62  16.5     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>  21       6  160    110  3.9   2.88  17.0     0     1     4     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>  24.4     4  147.    62  3.69  3.19  20       1     0     4     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 22 more rows</span></span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">-</span><span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    fit <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">wt</span> <span class="op">~</span> <span class="va">mpg</span> <span class="op">+</span> <span class="va">qsec</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">.x</span><span class="op">)</span><span class="op">)</span>, <span class="co"># S3 list-col</span></span>
<span>    tidied <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">tidy</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">tidied</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8 × 8</span></span></span>
<span><span class="co">##      am data     fit    term       estimate std.error statistic p.value</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Intercep…   4.28      3.46      1.24   2.47<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   mpg         -<span style="color: #BB0000;">0.101</span>     0.029<span style="text-decoration: underline;">4</span>   -<span style="color: #BB0000;">3.43</span>   7.50<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   qsec         0.039<span style="text-decoration: underline;">8</span>    0.151     0.264  7.98<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   gear        -<span style="color: #BB0000;">0.022</span><span style="color: #BB0000; text-decoration: underline;">9</span>    0.349    -<span style="color: #BB0000;">0.065</span><span style="color: #BB0000; text-decoration: underline;">6</span> 9.49<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Intercep…   4.92      1.40      3.52   3.09<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   mpg         -<span style="color: #BB0000;">0.192</span>     0.044<span style="text-decoration: underline;">3</span>   -<span style="color: #BB0000;">4.33</span>   5.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   qsec         0.091<span style="text-decoration: underline;">9</span>    0.098<span style="text-decoration: underline;">3</span>    0.935  3.65<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   gear         0.147     0.368     0.398  6.96<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span></code></pre>
<p>What if you want not just the <code>tidy</code> output, but the
<code>augment</code> and <code>glance</code> outputs as well, while
still performing each regression only once? Since we’re using
list-columns, we can just fit the model once and use multiple
list-columns to store the tidied, glanced and augmented outputs.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regressions</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>data <span class="op">=</span> <span class="op">-</span><span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    fit <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">data</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">wt</span> <span class="op">~</span> <span class="va">mpg</span> <span class="op">+</span> <span class="va">qsec</span> <span class="op">+</span> <span class="va">gear</span>, data <span class="op">=</span> <span class="va">.x</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    tidied <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">tidy</span><span class="op">)</span>,</span>
<span>    glanced <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">glance</span><span class="op">)</span>,</span>
<span>    augmented <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">augment</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">regressions</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">tidied</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8 × 10</span></span></span>
<span><span class="co">##      am data     fit    term       estimate std.error statistic p.value</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Intercep…   4.28      3.46      1.24   2.47<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   mpg         -<span style="color: #BB0000;">0.101</span>     0.029<span style="text-decoration: underline;">4</span>   -<span style="color: #BB0000;">3.43</span>   7.50<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   qsec         0.039<span style="text-decoration: underline;">8</span>    0.151     0.264  7.98<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   gear        -<span style="color: #BB0000;">0.022</span><span style="color: #BB0000; text-decoration: underline;">9</span>    0.349    -<span style="color: #BB0000;">0.065</span><span style="color: #BB0000; text-decoration: underline;">6</span> 9.49<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   (Intercep…   4.92      1.40      3.52   3.09<span style="color: #949494;">e</span><span style="color: #BB0000;">-3</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   mpg         -<span style="color: #BB0000;">0.192</span>     0.044<span style="text-decoration: underline;">3</span>   -<span style="color: #BB0000;">4.33</span>   5.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   qsec         0.091<span style="text-decoration: underline;">9</span>    0.098<span style="text-decoration: underline;">3</span>    0.935  3.65<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   gear         0.147     0.368     0.398  6.96<span style="color: #949494;">e</span><span style="color: #BB0000;">-1</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2 more variables: glanced &lt;list&gt;, augmented &lt;list&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regressions</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">glanced</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 17</span></span></span>
<span><span class="co">##      am data     fit   tidied   r.squared adj.r.squared sigma statistic</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lis&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>  <span style="color: #949494;">&lt;tibble&gt;</span>     0.833         0.778 0.291     15.0 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     0 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>  <span style="color: #949494;">&lt;tibble&gt;</span>     0.625         0.550 0.522      8.32</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 9 more variables: p.value &lt;dbl&gt;, df &lt;dbl&gt;, logLik &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;, df.residual &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   nobs &lt;int&gt;, augmented &lt;list&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regressions</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">augmented</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 32 × 15</span></span></span>
<span><span class="co">##       am data     fit    tidied   glanced     wt   mpg  qsec  gear</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  2.62  21    16.5     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  2.88  21    17.0     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  2.32  22.8  18.6     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  2.2   32.4  19.5     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  1.62  30.4  18.5     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  1.84  33.9  19.9     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  1.94  27.3  18.9     4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  2.14  26    16.7     5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  1.51  30.4  16.9     5</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     1 <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;lm&gt;</span>   <span style="color: #949494;">&lt;tibble&gt;</span> <span style="color: #949494;">&lt;tibble&gt;</span>  3.17  15.8  14.5     5</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 22 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: .fitted &lt;dbl&gt;, .resid &lt;dbl&gt;, .hat &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   .sigma &lt;dbl&gt;, .cooksd &lt;dbl&gt;, .std.resid &lt;dbl&gt;</span></span></span></code></pre>
<p>By combining the estimates and p-values across all groups into the
same tidy data frame (instead of a list of output model objects), a new
class of analyses and visualizations becomes straightforward. This
includes</p>
<ul>
<li>Sorting by p-value or estimate to find the most significant terms
across all tests</li>
<li>P-value histograms</li>
<li>Volcano plots comparing p-values to effect size estimates</li>
</ul>
<p>In each of these cases, we can easily filter, facet, or distinguish
based on the <code>term</code> column. In short, this makes the tools of
tidy data analysis available for the <em>results</em> of data analysis
and models, not just the inputs.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by David Robinson, Alex Hayes, Simon Couch, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
